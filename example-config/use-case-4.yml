global:
  trace:
    verbose: true

multiplexer:
  collectors:
    - name: tap_in
      dnstap:
        listen-ip: 0.0.0.0
        listen-port: 6000

  loggers:
    - name: std_out
      stdout:
        mode: text

    - name: loki_out
      lokiclient:
        server-url: "http://loki:3100/loki/api/v1/push"
        job-name: "dnscollector"
        text-format: "localtime identity qr queryip family protocol qname qtype rcode"

  routes:
    - from: [tap_in]
      to: [std_out, loki_out]